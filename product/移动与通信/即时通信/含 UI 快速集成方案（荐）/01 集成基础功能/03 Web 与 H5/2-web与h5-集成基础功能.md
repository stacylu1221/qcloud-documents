## 开发环境要求
-  Vue3
-  TypeScript
-  sass（sass-loader 版本 <= 10.1.1） 

## TUIKit源码集成
### 步骤1：创建项目
使用 vue-cli 创建项目， 配置Vue3 + TypeScript +sass。
<img style="width:800px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/ac877020ff69dbb11ea9dd9e7ee865a7.jpg"/> 

### 步骤2：下载TUIKit组件
从 [GitHub 下载 ](https://github.com/TencentCloud/TIMSDK/tree/master/Web)TUIKit源码。复制 TUIKit 文件夹放置到自己到工程的 src 文件夹中，例如：
<img style="width:300px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/1a4c4e68dc3b16a083b88196961db9fe.jpg"/> 

### 步骤3：生成UserSig 
1. 从 [GitHub 下载 ](https://github.com/TencentCloud/TIMSDK/tree/master/Web/Demo)`GenerateTestUserSig` 工具包，并复制到项目中，例如：
<img style="width:300px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/5b08564572aa55901e7f07867fd8737a.png"/>

2. 设置 `GenerateTestUserSig` 文件中的相关参数，其中 SDKAppID 和密钥等信息，可通过 [即时通信 IM 控制台](https://console.cloud.tencent.com/im) 获取，单击目标应用卡片，进入应用的基础配置页面。例如：
<img style="width:600px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/480455e5b4a2a1d4d67ffb2e445452a6.png"/>

3. 在基本信息区域，单击显示密钥，复制并保存密钥信息至 `GenerateTestUserSig` 文件。 
<img style="width:600px; max-width: inherit;" src="https://qcloudimg.tencent-cloud.cn/raw/bbb093bfc7343a626dd8bc6f3d4cabf7.png"/> 

>!
> 
> 本文提到的获取 UserSig 的方案是在客户端代码中配置 SECRETKEY，该方法中 SECRETKEY 很容易被反编译逆向破解，一旦您的密钥泄露，攻击者就可以盗用您的腾讯云流量，因此**该方法仅适合本地跑通功能调试**。 正确的 UserSig 签发方式是将 UserSig 的计算代码集成到您的服务端，并提供面向 App 的接口，在需要 UserSig 时由您的 App 向业务服务器发起请求获取动态 UserSig。更多详情请参见 [服务端生成 UserSig](https://cloud.tencent.com/document/product/269/32688#GeneratingdynamicUserSig)。

### 步骤4：下载 TUIKit 组件依赖
<dx-codeblock>
:::  shell
cd src/TUIKit
npm i --legacy-peer-deps
:::
</dx-codeblock>

### 步骤5：引入 TUIKit 组件
在 main.ts 中，引入 TUIKit，并注册到 Vue 项目实例中：
<dx-codeblock>
:::  js
import { createApp } from 'vue'
import App from './App.vue'
import { TUICore, TUIComponents } from "./TUIKit";
import { genTestUserSig } from "../debug";
const config = {
	SDKAppID: 0, // Replace 0 with the SDKAppID of your IM application when connecting. Value type: Number
};
// init TUIKit
const TUIKit = TUICore.init(config);
// TUIKit add TUIComponents
TUIKit.use(TUIComponents);
const userID = 'xxxx'; // User ID
const userInfo = {
	userID: userID,
	userSig: genTestUserSig(userID).userSig, // The password with which the user logs in to IM. It is the ciphertext generated by encrypting information such as userID.For the detailed generation method, see Generating UserSig
};
// login TUIKit
TUIKit.login(userInfo);
// register
createApp(App).use(TUIKit).mount('#app')
:::
</dx-codeblock>

>!
> 
> SDKAppID 需与 GenerateTestUserSig 文件中 SDKAppID 一致。

### 步骤6：调用 TUIKit 组件
在需要展示的页面，调用 TUIKit 的组件即可使用。
例如：在 App.vue页 面中，使用 TUIConversation、TUIChat 搭建聊天界面。
<dx-codeblock>
:::  html
<template>
	<div class="home-TUIKit-main">
		<div class="conversation">
			<TUIConversation />
		</div>
		<div class="chat">
			<TUIChat>
				<h1>欢迎使用腾讯云即时通信IM</h1>
			</TUIChat>
		</div>
	</div>
</template>

<style scoped>
.home-TUIKit-main {
	display: flex;
	height: 800px;
}
.conversation {
	min-width: 285px;
	flex: 0 0 24%;
	border-right: 1px solid #f4f5f9;
}
.chat {
	flex: 1;
	height: 100%;
	position: relative;
}
</style>
:::
</dx-codeblock>

### 步骤7：启动项目
<dx-codeblock>
:::  shell
npm run serve
:::
</dx-codeblock>

## 常见问题
### 1. 如何生成 UserSig？

UserSig 签发方式是将 UserSig 的计算代码集成到您的服务端，并提供面向项目的接口，在需要 UserSig 时由您的项目向业务服务器发起请求获取动态 UserSig。更多详情请参见 [服务端生成 UserSig](https://cloud.tencent.com/document/product/269/32688#GeneratingdynamicUserSig)。

### 2. Module not found: Error: Can't resolve 'sass-loader'

- IM TUIKit web 样式依赖sass，需在项目全局安装sass 和 sass-loader。
- 其sass-loader 的版本 <= 10.1.1
<dx-codeblock>
:::  shell
npm install sass sass-loader@10.1.1 --save-dev
:::
</dx-codeblock>




